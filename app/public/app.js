"use strict";function findWithAttr(array,attr,value){for(var i=0;i<array.length;i+=1)if(array[i][attr]===value)return i}function addChar(input,character){input.value+=character,$("#latex-display").focus()}function fromresults(result){var latex_display=document.getElementById("latex-display");latex_display.value+=result}function cos(form){form.latex.value+="cos(",$("#latex-display").focus()}function sin(form){form.latex.value+="sin(",$("#latex-display").focus()}function tan(form){form.latex.value+="tan(",$("#latex-display").focus()}function sqrt(form){form.latex.value+="sqrt(",$("#latex-display").focus()}function cube(form){form.latex.value+="^3",$("#latex-display").focus()}function left_bracket(form){form.latex.value+="(",$("#latex-display").focus()}function right_bracket(form){form.latex.value+=")",$("#latex-display").focus()}function divide(form){form.latex.value+="/",$("#latex-display").focus()}function deleteChar(input){input.value=input.value.substring(0,input.value.length-1),$("#latex-display").focus()}function changeSign(input){"-"==input.value.substring(0,1)?input.value=input.value.substring(1,input.value.length):input.value="-"+input.value}function compute(form){var math_result=math.eval(form.latex.value);form.latex.value=form.latex.value.replace(/[(]/g,"{("),form.latex.value=form.latex.value.replace(/[)]/g,")}"),$(".calc-entries tbody").append("<tr><td>\\("+form.latex.value+'\\)</td><td class="calc-result" onclick="fromresults($(this).text());">'+math_result+'</td><td class="delete-row" onclick="$(this).parent().remove()"><i class="fa fa-trash-o"></i></td></tr>'),form.latex.value=math_result,MathJax.Hub.Queue(["Typeset",MathJax.Hub]),$("#latex-display").focus()}function checkNum(str){for(var i=0;i<str.length;i++){var ch=str.substring(i,i+1);if(("0">ch||ch>"9")&&("a">ch||ch>"z")&&" "!=ch&&"/"!=ch&&"*"!=ch&&"+"!=ch&&"-"!=ch&&"."!=ch&&"^"!=ch&&"("!=ch&&")"!=ch&&"{"!=ch&&"}"!=ch)return alert("invalid entry!"),!1}return!0}function clearHistory(){$(".calc-entries tbody tr").remove()}$(document).on("click",function(){$(".collapse").collapse("hide")});var ArbitrageApp=angular.module("myApp",["ngRoute","ArbitrageControllers","fcsa-number","ngAnimate","ngNumeraljs","angularUtils.directives.dirDisqus"]);ArbitrageApp.config(["$routeProvider","$locationProvider",function($routeProvider,$locationProvider){$routeProvider.when("/index",{templateUrl:"views/partials/index.html",controller:"IndexCtrl"}).when("/videos/:videoId",{templateUrl:"views/partials/video.html",controller:"VideoCtrl"}).when("/videos",{templateUrl:"views/partials/videos.html",controller:"VideoListCtrl"}).when("/signup",{templateUrl:"views/partials/signup.html",controller:"SignupCtrl"}).when("/login",{templateUrl:"views/partials/login.html",controller:"LoginCtrl"}).when("/profile",{templateUrl:"views/partials/profile.html",controller:"VideoListCtrl"}).when("/contact",{templateUrl:"views/partials/contact.html",controller:"ContactCtrl"}).when("/careers",{templateUrl:"views/partials/careers.html",controller:"CareersCtrl"}).when("/about",{templateUrl:"views/partials/about.html",controller:"AboutCtrl"}).otherwise({redirectTo:"/videos"}),$locationProvider.html5Mode(!1).hashPrefix("!")}]),ArbitrageApp.directive("youtube",function($window,$http){return{restrict:"E",scope:{videoid:"@",videodbid:"@"},template:"<div></div>",link:function(scope,element){function onProgress(video_percent_complete){video_percent_complete>=90&&!is_video_complete&&(is_video_complete=!0,$http.post("api/updateUserVideoViews",{videodbid:scope.videodbid}).success(function(data,status,headers,config){console.log("Success status: "+status)}).error(function(data,status,headers,config){console.log("ERROR status: "+status)}))}var tag=document.createElement("script");tag.src="https://www.youtube.com/iframe_api";var firstScriptTag=document.getElementsByTagName("script")[0];firstScriptTag.parentNode.insertBefore(tag,firstScriptTag);var player,is_video_complete=!1;$window.onYouTubeIframeAPIReady=function(){player=new YT.Player(element.children()[0],{playerVars:{autoplay:0,html5:1,modesbranding:0,iv_load_policy:3,rel:0,controls:1},videoId:scope.videoid,events:{onReady:function(event){function updateTime(){var oldTime=video_current_time;if(player&&player.getCurrentTime&&(video_current_time=player.getCurrentTime()),video_current_time!==oldTime){var video_length=player.getDuration();video_percent_complete=video_current_time/video_length*100,console.log("video_percent_complete: "+video_percent_complete),onProgress(video_percent_complete)}}event.target.cueVideoById(scope.videoid);var video_current_time=0,timeupdater=null,video_percent_complete=0;timeupdater=setInterval(updateTime,100)},onStateChange:function(event){console.log("STATUS CHANGED. New status: "+event.data)}}})},scope.$watch("videoid",function(newValue,oldValue){return newValue==oldValue?void console.log("no url change"):void(scope.videoid&&onYouTubeIframeAPIReady())}),scope.$watch("videodbid",function(newValue,oldValue){return newValue==oldValue?void console.log("no url change"):void 0})}}}),$(document).on("click",function(){$(".collapse").collapse("hide")});var ArbitrageControllers=angular.module("ArbitrageControllers",[]);ArbitrageControllers.controller("MainCtrl",["$scope","$rootScope","$http",function($scope,$rootScope,$http){}]),ArbitrageControllers.controller("VideoListCtrl",["$scope","$rootScope","$routeParams","$http","$sce",function($scope,$rootScope,$routeParams,$http,$sce){$scope.formData={},$http.get("/api/videos").success(function(data){$scope.videos=data}).error(function(data){console.log("Error: "+data)})}]),ArbitrageControllers.controller("ResearchToolCtrl",["$scope","$http",function($scope,$http){$http.get("data/cpi-data.json").success(function(data){$scope.cpi_data=data,$scope.base_cost=1e3,$scope.month1=0,$scope.year1=1999,$scope.month2=11,$scope.year2=2014})}]),ArbitrageControllers.controller("VideoCtrl",["$scope","$routeParams","$http","$sce","$window",function($scope,$routeParams,$http,$sce,$window){$scope.formData={},$scope.lessonLoaded=!1,$http.get("/api/videos/"+$routeParams.videoId).success(function(data){$scope.video=data,$scope.lessonLoaded=!0,$scope.question,$scope.radio,$scope.correct,$scope.user_answer=[],$scope.userAnswer,$scope.answer;var question_variables=[];$scope.showCalc=!1,$scope.toggleCalc=function(){$scope.showCalc=!$scope.showCalc},$scope.evaluateQuestion=function(ind){$scope.radio=$scope.video.problemSets[ind].radio,$scope.question_index=ind;var ques=$scope.video.problemSets[ind].question,ans=$scope.video.problemSets[ind].answer;if(!$scope.radio&&question_variables[ind]){for(var vars=$scope.video.problemSets[ind].variables,keys=Object.keys(vars),i=0;i<keys.length;i++){var str=""+keys[i],str=new RegExp(str,"g"),random_no=question_variables[ind][i];ques=ques.replace(str,random_no),random_no=numeral().unformat(random_no),ans=ans.replace(str,random_no)}ans=eval(ans),Math.round(ans)!==ans&&(ans=ans.toFixed(2))}$scope.question=ques,$scope.answer=ans,MathJax.Hub.Queue(["Typeset",MathJax.Hub])},$scope.setVariables=function(ind){var vars,keys,random_no,min,max,no_type,no_format,variable_array=[];vars=$scope.video.problemSets[ind].variables,keys=Object.keys(vars);for(var i=0;i<keys.length;i++){if(min=vars[keys[i]][0],max=vars[keys[i]][1],no_type=vars[keys[i]][2],no_format=vars[keys[i]][3],"i"===no_type?random_no=Math.floor(Math.random()*(max+1-min)+min):"f"===no_type&&(random_no=Math.random()*(max+1-min)+min),"c"===no_format)random_no=numeral(random_no).format("$0,0.00");else if("y"===no_format)switch(random_no){case 1:random_no="January";break;case 2:random_no="February";break;case 3:random_no="March";break;case 4:random_no="April";break;case 5:random_no="May";break;case 6:random_no="June";break;case 7:random_no="July";break;case 8:random_no="August";break;case 9:random_no="September";break;case 10:random_no="October";break;case 11:random_no="November";break;case 12:random_no="December";break;default:random_no=numeral(random_no).format("0")}else"p"===no_format&&(random_no/=100,random_no=numeral(random_no).format("0.00%"));variable_array.push(random_no)}question_variables[ind]=variable_array}}).error(function(data){console.log("Error: "+data)})}]),ArbitrageControllers.controller("IndexCtrl",[function(){}]),ArbitrageControllers.controller("SignupCtrl",[function(){}]),ArbitrageControllers.controller("LoginCtrl",[function(){}]),ArbitrageControllers.controller("AboutCtrl",[function(){}]),ArbitrageControllers.controller("CareersCtrl",[function(){}]),ArbitrageControllers.controller("SignupCtrl",[function(){}]),ArbitrageControllers.controller("ContactCtrl",[function(){}]),ArbitrageControllers.controller("ProfileCtrl",[function(){}]),$(function(){var scrollMagicController=new ScrollMagic.Controller({globalSceneOptions:{triggerHook:.08}}),tl_call_to_action=(new ScrollMagic.Scene({triggerElement:"#scene0"}).setClassToggle("#scene_marker0","active").addTo(scrollMagicController),new ScrollMagic.Scene({triggerElement:"#new_videos_header"}).setClassToggle("#scene_marker01","active").addTo(scrollMagicController),new TimelineMax),tween_call_to_action=TweenMax.fromTo("#call_to_action",1,{backgroundPosition:"100% 30%",ease:Linear.easeNone},{backgroundPosition:"100% 100%",ease:Linear.easeNone});tl_call_to_action.add(tween_call_to_action);var tl_3=(new ScrollMagic.Scene({triggerElement:"#scene0",duration:"100%"}).setTween(tl_call_to_action).addTo(scrollMagicController),new ScrollMagic.Scene({triggerElement:"#scene1"}).setClassToggle("#scene_marker1","active").addTo(scrollMagicController),new ScrollMagic.Scene({triggerElement:"#scene1"}).setClassToggle("#scene_marker1","active").addTo(scrollMagicController),new ScrollMagic.Scene({triggerElement:"#video_solo_cont"}).setClassToggle("#scene_marker2","active").addTo(scrollMagicController),new ScrollMagic.Scene({triggerElement:"#problem_sets_cont"}).setClassToggle("#scene_marker3","active").addTo(scrollMagicController),new ScrollMagic.Scene({triggerElement:"#calc_cont"}).setClassToggle("#scene_marker4","active").addTo(scrollMagicController),new ScrollMagic.Scene({triggerElement:"#cpi_tool_cont"}).setClassToggle("#scene_marker5","active").addTo(scrollMagicController),new TimelineMax),tween_anchor=(new ScrollMagic.Scene({triggerElement:"#scene3"}).setTween(tl_3).setClassToggle("#scene_marker6","active").addTo(scrollMagicController),TweenMax.from("#pic0",.5,{}));new ScrollMagic.Scene({triggerElement:"a#scene0",duration:200,triggerHook:"onLeave"}).setTween(tween_anchor).addTo(scrollMagicController);scrollMagicController.scrollTo(function(new_position){TweenMax.to(window,.5,{scrollTo:{y:new_position-45}})}),$(document).on("click","a[href^='#']",function(e){var id=$(this).attr("href");$(id).length>0&&(e.preventDefault(),scrollMagicController.scrollTo(id),window.history&&window.history.pushState&&history.pushState("",document.title,id))})});